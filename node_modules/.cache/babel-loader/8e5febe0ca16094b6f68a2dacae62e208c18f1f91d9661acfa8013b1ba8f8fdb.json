{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/dell/Desktop/Game project/app1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/dell/Desktop/Game project/app1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/dell/Desktop/Game project/app1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/dell/Desktop/Game project/app1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import React from 'react'\nimport logo from'./../../Images/logo.png';import Axios from\"axios\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import Joi from\"joi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(_ref){var _errorList$filter$;var decodeUserData=_ref.decodeUserData;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var navigate=useNavigate();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errorList=_useState8[0],setErrorList=_useState8[1];function getUserData(e){var myUser=_objectSpread({},user);myUser[e.target.name]=e.target.value;setUser(myUser);console.log(myUser);}function sendUserDataToApi(){return _sendUserDataToApi.apply(this,arguments);}function _sendUserDataToApi(){_sendUserDataToApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$Axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.post(\"https://sticky-note-fe.vercel.app/signin\",user);case 2:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;if(data.message===\"success\"){setLoading(false);// b5zn l token fel localstorage 3shan a3rf mnha lw mwgoda eno 3amel login wla la2 w atl3 mnha user data\nlocalStorage.setItem(\"userToken\",data.token);// bnady 3al func de b3d ma at2kd eno 3ml login w api rdt 3leh b eno ssa7 3shan a5od l token mnha w a3mlo decode\ndecodeUserData();// navigate to home component\nnavigate(\"/home\");}else{setLoading(false);setError(data.message);}case 5:case\"end\":return _context.stop();}}},_callee);}));return _sendUserDataToApi.apply(this,arguments);}function validateLoginForm(){var scheme=Joi.object({email:Joi.string().email({tlds:{allow:[\"com\",\"net\"]}}).required(),password:Joi.string().pattern(/^[A-Z][a-z]{3,8}$/)});return scheme.validate(user,{abortEarly:false});}function submitLoginForm(e){e.preventDefault();setLoading(true);var validation=validateLoginForm();if(validation.error){setErrorList(validation.error.details);}else{sendUserDataToApi();}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container my-5 py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 bg-register-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 gray py-5  text-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:\"w-25\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-gray mb-4 text-center\",children:\"Log in to GameOver\"}),error?/*#__PURE__*/_jsxs(\"div\",{className:\"alert text-white bg-danger\",children:[\"ERROR! \",error]}):\"\",/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitLoginForm,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"email\",className:\"form-control my-inputs\",placeholder:\"Email Address\",name:\"email\",id:\"email\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:(_errorList$filter$=errorList.filter(function(error){return error.context.label===\"email\";})[0])===null||_errorList$filter$===void 0?void 0:_errorList$filter$.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"password\",className:\"form-control my-inputs\",placeholder:\"Password\",name:\"password\",id:\"password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errorList.filter(function(error){return error.context.label===\"password\";})[0]?'\"password\" should start with uppercase the form 3 and 8 characters lowercase':\"\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-submit text-white submitButton w-100 mb-3 py-2 btn-user btn-block\",children:loading?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}):\"LOGIN\"})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"text-light\"}),/*#__PURE__*/_jsx(\"a\",{className:\"text-primary text-decoration-none small mx-1\",href:\"https://policies.google.com/privacy\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"small text-center text-muted\",children:[\"Not a member yet?\",/*#__PURE__*/_jsxs(Link,{className:\"ms-2 text-primary text-decoration-none\",to:\"/register\",children:[\"Create Account\",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right small\"})]})]})]})]})})});}","map":{"version":3,"names":["logo","Axios","React","useState","Link","useNavigate","Joi","Login","decodeUserData","email","password","user","setUser","navigate","error","setError","loading","setLoading","errorList","setErrorList","getUserData","e","myUser","target","name","value","console","log","sendUserDataToApi","post","data","message","localStorage","setItem","token","validateLoginForm","scheme","object","string","tlds","allow","required","pattern","validate","abortEarly","submitLoginForm","preventDefault","validation","details","filter","context","label"],"sources":["C:/Users/dell/Desktop/Game project/app1/src/Component/Login/Login.jsx"],"sourcesContent":["// import React from 'react'\r\nimport logo from './../../Images/logo.png'\r\nimport Axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Joi from \"joi\"\r\n\r\nexport default function Login({ decodeUserData }) {\r\n\r\n  let [user, setUser] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  let navigate = useNavigate();\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [errorList, setErrorList] = useState([]);\r\n  function getUserData(e) {\r\n    let myUser = { ...user };\r\n    myUser[e.target.name] = e.target.value;\r\n    setUser(myUser);\r\n    console.log(myUser);\r\n  }\r\n  async function sendUserDataToApi() {\r\n    let { data } = await Axios.post(\r\n      \"https://sticky-note-fe.vercel.app/signin\",\r\n      user\r\n    );\r\n\r\n    if (data.message === \"success\") {\r\n      setLoading(false);\r\n      // b5zn l token fel localstorage 3shan a3rf mnha lw mwgoda eno 3amel login wla la2 w atl3 mnha user data\r\n      localStorage.setItem(\"userToken\", data.token);\r\n\r\n      // bnady 3al func de b3d ma at2kd eno 3ml login w api rdt 3leh b eno ssa7 3shan a5od l token mnha w a3mlo decode\r\n      decodeUserData();\r\n      // navigate to home component\r\n      navigate(\"/home\");\r\n    } else {\r\n      setLoading(false);\r\n\r\n      setError(data.message);\r\n    }\r\n  }\r\n  function validateLoginForm() {\r\n    let scheme = Joi.object({\r\n      email: Joi.string()\r\n        .email({ tlds: { allow: [\"com\", \"net\"] } })\r\n        .required(),\r\n      password: Joi.string().pattern(/^[A-Z][a-z]{3,8}$/),\r\n    });\r\n    return scheme.validate(user, { abortEarly: false });\r\n  }\r\n  function submitLoginForm(e) {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    let validation = validateLoginForm();\r\n    if (validation.error) {\r\n      setErrorList(validation.error.details);\r\n    } else {\r\n      sendUserDataToApi();\r\n    }\r\n  }\r\n\r\n\r\n\r\n  return <>\r\n  <div className=\"container my-5 py-5\">\r\n    <div className=\"row\">\r\n      <div className=\"col-md-6 bg-register-image\"></div>\r\n\r\n      <div className=\"col-md-6 gray py-5  text-center\">\r\n        <img src={logo} alt=\"logo\" className='w-25' />\r\n        <h2 className=\"text-gray mb-4 text-center\">Log in to GameOver</h2>\r\n\r\n        {error ? (\r\n              <div className=\"alert text-white bg-danger\">ERROR! {error}</div>\r\n            ) : (\r\n              \"\"\r\n            )}\r\n\r\n            <form onSubmit={submitLoginForm}>\r\n            <div className=\"form-group mb-3\">\r\n              <input\r\n                  onChange={getUserData}\r\n                  type=\"email\"\r\n                  className=\"form-control my-inputs\"\r\n                  placeholder=\"Email Address\"\r\n                  name=\"email\"\r\n                  id=\"email\"\r\n                />\r\n                <p className=\"text-danger\">\r\n                  {\r\n                    errorList.filter(\r\n                      (error) => error.context.label === \"email\"\r\n                    )[0]?.message\r\n                  }\r\n                </p>\r\n              </div>\r\n              <div className=\"form-group mb-3\">\r\n                <input\r\n                  onChange={getUserData}\r\n                  type=\"password\"\r\n                  className=\"form-control my-inputs\"\r\n                  placeholder=\"Password\"\r\n                  name=\"password\"\r\n                  id=\"password\"\r\n                />\r\n                <p className=\"text-danger\">\r\n                  {errorList.filter(\r\n                    (error) => error.context.label === \"password\"\r\n                  )[0]\r\n                    ? '\"password\" should start with uppercase the form 3 and 8 characters lowercase'\r\n                    : \"\"}\r\n                </p>\r\n              </div>\r\n              <Link  to='/'>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-submit text-white submitButton w-100 mb-3 py-2 btn-user btn-block\">\r\n                {loading ? (\r\n                  <i className=\"fas fa-spinner fa-spin\"></i>\r\n                ) : (\r\n                  \"LOGIN\"\r\n                )}\r\n\r\n              </button>\r\n                </Link>\r\n\r\n            </form>\r\n            <hr className=\"text-light\" />\r\n\r\n            <a\r\n              className=\"text-primary text-decoration-none small mx-1\"\r\n              href=\"https://policies.google.com/privacy\"\r\n            >\r\n              Forgot Password?\r\n            </a>\r\n\r\n            <p className=\"small text-center text-muted\">\r\n              Not a member yet?\r\n              <Link\r\n                className=\"ms-2 text-primary text-decoration-none\"\r\n                to=\"/register\"\r\n              >\r\n                Create Account\r\n                <i className=\"fas fa-chevron-right small\"></i>\r\n              </Link>\r\n            </p>\r\n\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  \r\n  </>\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}